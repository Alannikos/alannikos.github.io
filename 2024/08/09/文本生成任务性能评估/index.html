<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <title>文本生成任务性能评估 | Alannikos</title>
  <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="keywords" content="">
  <meta name="theme-color" content="#10b981">

  <link rel="stylesheet" href="https://unpkg.com/lxgw-wenkai-screen-webfont@1.7.0/lxgwwenkaiscreen.css">

  <link rel="canonical" href="https://alannikos.github.io/2024/08/09/%E6%96%87%E6%9C%AC%E7%94%9F%E6%88%90%E4%BB%BB%E5%8A%A1%E6%80%A7%E8%83%BD%E8%AF%84%E4%BC%B0/">

  <link rel="shortcut icon" href="/logo.svg">

  
  
<link rel="stylesheet" href="/fonts/sea-font.css">


  
  
<link rel="stylesheet" href="/css/main.css">


  
  <meta name="description" content="一. 概述在当今快速发展的信息技术领域，文本生成技术已成为人工智能领域的一个重要分支。它不仅涉及到自然语言处理（NLP）的多个子领域，如语言模型、机器翻译和文本摘要，而且对于提高用户体验和自动化内容创作具有重要意义。因此，对文本生成系统的性能进行评估是至关重要的，下面本文将会介绍一些常见的文本生成任务评价指标及代码实现。 二. 常见指标及代码实现1. BLEU指标（1）介绍BLEU（bilingu">
<meta property="og:type" content="article">
<meta property="og:title" content="文本生成任务性能评估">
<meta property="og:url" content="https://alannikos.github.io/2024/08/09/%E6%96%87%E6%9C%AC%E7%94%9F%E6%88%90%E4%BB%BB%E5%8A%A1%E6%80%A7%E8%83%BD%E8%AF%84%E4%BC%B0/index.html">
<meta property="og:site_name" content="Alannikos">
<meta property="og:description" content="一. 概述在当今快速发展的信息技术领域，文本生成技术已成为人工智能领域的一个重要分支。它不仅涉及到自然语言处理（NLP）的多个子领域，如语言模型、机器翻译和文本摘要，而且对于提高用户体验和自动化内容创作具有重要意义。因此，对文本生成系统的性能进行评估是至关重要的，下面本文将会介绍一些常见的文本生成任务评价指标及代码实现。 二. 常见指标及代码实现1. BLEU指标（1）介绍BLEU（bilingu">
<meta property="og:locale">
<meta property="og:image" content="https://alannikos.github.io/assets/images/3/ppl.gif">
<meta property="article:published_time" content="2024-08-09T08:28:23.000Z">
<meta property="article:modified_time" content="2024-08-12T09:10:28.606Z">
<meta property="article:author" content="Alannikos">
<meta property="article:tag" content="metrics">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://alannikos.github.io/assets/images/3/ppl.gif">

  <style>
    :root {
      --sea-color-primary: #10b981;
    }
  </style>

  
<script src="/js/global.js"></script>

<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">

      <link rel="stylesheet" href="https://unpkg.com/@docsearch/css@3.5.2/dist/style.css">
      
<link rel="stylesheet" href="/css/plugins/docsearch.css">

    <style>mjx-container[jax="SVG"] { font-family: none; }</style><!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head>
<body>
  <header class="sea-header">
    <nav class="sea-nav-wrap">
  <h1 class="sea-nav-logo" title="">
    <a href="/">Alannikos</a>
  </h1>
  <div class="sea-nav-menus">
    <div class="sea-menu-pc-wrap">
  
    <a
      class="sea-menu-link"
      
      href="/"
    >
      首页
    </a>
  
    <a
      class="sea-menu-link"
      
      href="/categories/"
    >
      分类
    </a>
  
    <a
      class="sea-menu-link"
      
      href="/tags/"
    >
      标签
    </a>
  
    <a
      class="sea-menu-link"
      
      href="/archives/"
    >
      归档
    </a>
  
    <a
      class="sea-menu-link"
      
      href="/friends/"
    >
      友链
    </a>
  
    <a
      class="sea-menu-link"
      
      href="/about/"
    >
      关于
    </a>
  
</div>

    <div id="sea-mobile-nav-toggle">
      <i class="sea-font">bars</i>
    </div>
  </div>
</nav>
  </header>
  <main id="sea-main-wrapper">
    <article class="sea-page-card-wrapper">
  <header class="sea-article-header">
    <h1 class="sea-article-title">文本生成任务性能评估</h1>
    
      <div class="sea-post-meta sea-post-meta__center">
        <div class="sea-post-time">
  <i class="sea-font">date</i>
  <time datetime="2024-08-09T08:28:23.000Z">2024-08-09</time>
</div>
        
  <div class="sea-post-categories">
    <i class="sea-font">folder</i>
    <a class="category-link" href="/categories/NLP/">NLP</a>
  </div>

        
  <div class="sea-post-tags">
    <i class="sea-font">tag</i>
    <a class="tag-link" href="/tags/metrics/" rel="tag">metrics</a>
  </div>

      </div>
    
  </header>
  <div class="sea-article-content sea-doc">
    <h3 id="一-概述"><a href="#一-概述" class="headerlink" title="一. 概述"></a>一. 概述</h3><p>在当今快速发展的信息技术领域，文本生成技术已成为人工智能领域的一个重要分支。它不仅涉及到自然语言处理（NLP）的多个子领域，如语言模型、机器翻译和文本摘要，而且对于提高用户体验和自动化内容创作具有重要意义。因此，对文本生成系统的性能进行评估是至关重要的，下面本文将会介绍一些常见的文本生成任务评价指标及代码实现。</p>
<h3 id="二-常见指标及代码实现"><a href="#二-常见指标及代码实现" class="headerlink" title="二. 常见指标及代码实现"></a>二. 常见指标及代码实现</h3><h4 id="1-BLEU指标"><a href="#1-BLEU指标" class="headerlink" title="1. BLEU指标"></a>1. BLEU指标</h4><h5 id="（1）介绍"><a href="#（1）介绍" class="headerlink" title="（1）介绍"></a>（1）介绍</h5><p><strong>BLEU（bilingual evaluation understudy）</strong>，首次出现在IBM发表的一篇名为BLEU: a Method for Automatic Evaluation of Machine Translation的论文中，详情可见参考文献<a target="_blank" rel="noopener" href="https://aclanthology.org/P02-1040.pdf">P02-1040.pdf (aclanthology.org)</a>。BLEU的中文翻译为<strong>双语评估替补</strong>，所谓替补可以理解为通过机器代替人类进行翻译，所以这项指标的含义就是评估机器翻译结果的质量，但是这项指标有时也会被用在除机器翻译之外的文本生成任务。</p>
<h5 id="（2）计算过程"><a href="#（2）计算过程" class="headerlink" title="（2）计算过程"></a>（2）计算过程</h5><p>公式如下所示：</p>
<mjx-container class="MathJax" jax="SVG"><svg style="vertical-align: -7.514ex;" xmlns="http://www.w3.org/2000/svg" width="34.43ex" height="16.159ex" role="img" focusable="false" viewBox="0 -3821.2 15218 7142.3" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path id="MJX-1-TEX-N-42" d="M131 622Q124 629 120 631T104 634T61 637H28V683H229H267H346Q423 683 459 678T531 651Q574 627 599 590T624 512Q624 461 583 419T476 360L466 357Q539 348 595 302T651 187Q651 119 600 67T469 3Q456 1 242 0H28V46H61Q103 47 112 49T131 61V622ZM511 513Q511 560 485 594T416 636Q415 636 403 636T371 636T333 637Q266 637 251 636T232 628Q229 624 229 499V374H312L396 375L406 377Q410 378 417 380T442 393T474 417T499 456T511 513ZM537 188Q537 239 509 282T430 336L329 337H229V200V116Q229 57 234 52Q240 47 334 47H383Q425 47 443 53Q486 67 511 104T537 188Z"></path><path id="MJX-1-TEX-N-50" d="M130 622Q123 629 119 631T103 634T60 637H27V683H214Q237 683 276 683T331 684Q419 684 471 671T567 616Q624 563 624 489Q624 421 573 372T451 307Q429 302 328 301H234V181Q234 62 237 58Q245 47 304 46H337V0H326Q305 3 182 3Q47 3 38 0H27V46H60Q102 47 111 49T130 61V622ZM507 488Q507 514 506 528T500 564T483 597T450 620T397 635Q385 637 307 637H286Q237 637 234 628Q231 624 231 483V342H302H339Q390 342 423 349T481 382Q507 411 507 488Z"></path><path id="MJX-1-TEX-N-3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path><path id="MJX-1-TEX-S3-7B" d="M618 -943L612 -949H582L568 -943Q472 -903 411 -841T332 -703Q327 -682 327 -653T325 -350Q324 -28 323 -18Q317 24 301 61T264 124T221 171T179 205T147 225T132 234Q130 238 130 250Q130 255 130 258T131 264T132 267T134 269T139 272T144 275Q207 308 256 367Q310 436 323 519Q324 529 325 851Q326 1124 326 1154T332 1205Q369 1358 566 1443L582 1450H612L618 1444V1429Q618 1413 616 1411L608 1406Q599 1402 585 1393T552 1372T515 1343T479 1305T449 1257T429 1200Q425 1180 425 1152T423 851Q422 579 422 549T416 498Q407 459 388 424T346 364T297 318T250 284T214 264T197 254L188 251L205 242Q290 200 345 138T416 3Q421 -18 421 -48T423 -349Q423 -397 423 -472Q424 -677 428 -694Q429 -697 429 -699Q434 -722 443 -743T465 -782T491 -816T519 -845T548 -868T574 -886T595 -899T610 -908L616 -910Q618 -912 618 -928V-943Z"></path><path id="MJX-1-TEX-N-31" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJX-1-TEX-N-69" d="M69 609Q69 637 87 653T131 669Q154 667 171 652T188 609Q188 579 171 564T129 549Q104 549 87 564T69 609ZM247 0Q232 3 143 3Q132 3 106 3T56 1L34 0H26V46H42Q70 46 91 49Q100 53 102 60T104 102V205V293Q104 345 102 359T88 378Q74 385 41 385H30V408Q30 431 32 431L42 432Q52 433 70 434T106 436Q123 437 142 438T171 441T182 442H185V62Q190 52 197 50T232 46H255V0H247Z"></path><path id="MJX-1-TEX-N-66" d="M273 0Q255 3 146 3Q43 3 34 0H26V46H42Q70 46 91 49Q99 52 103 60Q104 62 104 224V385H33V431H104V497L105 564L107 574Q126 639 171 668T266 704Q267 704 275 704T289 705Q330 702 351 679T372 627Q372 604 358 590T321 576T284 590T270 627Q270 647 288 667H284Q280 668 273 668Q245 668 223 647T189 592Q183 572 182 497V431H293V385H185V225Q185 63 186 61T189 57T194 54T199 51T206 49T213 48T222 47T231 47T241 46T251 46H282V0H273Z"></path><path id="MJX-1-TEX-N-A0" d=""></path><path id="MJX-1-TEX-I-1D450" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path><path id="MJX-1-TEX-N-3E" d="M84 520Q84 528 88 533T96 539L99 540Q106 540 253 471T544 334L687 265Q694 260 694 250T687 235Q685 233 395 96L107 -40H101Q83 -38 83 -20Q83 -19 83 -17Q82 -10 98 -1Q117 9 248 71Q326 108 378 132L626 250L378 368Q90 504 86 509Q84 513 84 520Z"></path><path id="MJX-1-TEX-I-1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJX-1-TEX-I-1D452" d="M39 168Q39 225 58 272T107 350T174 402T244 433T307 442H310Q355 442 388 420T421 355Q421 265 310 237Q261 224 176 223Q139 223 138 221Q138 219 132 186T125 128Q125 81 146 54T209 26T302 45T394 111Q403 121 406 121Q410 121 419 112T429 98T420 82T390 55T344 24T281 -1T205 -11Q126 -11 83 42T39 168ZM373 353Q367 405 305 405Q272 405 244 391T199 357T170 316T154 280T149 261Q149 260 169 260Q282 260 327 284T373 353Z"></path><path id="MJX-1-TEX-N-28" d="M94 250Q94 319 104 381T127 488T164 576T202 643T244 695T277 729T302 750H315H319Q333 750 333 741Q333 738 316 720T275 667T226 581T184 443T167 250T184 58T225 -81T274 -167T316 -220T333 -241Q333 -250 318 -250H315H302L274 -226Q180 -141 137 -14T94 250Z"></path><path id="MJX-1-TEX-N-2212" d="M84 237T84 250T98 270H679Q694 262 694 250T679 230H98Q84 237 84 250Z"></path><path id="MJX-1-TEX-N-2F" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJX-1-TEX-N-29" d="M60 749L64 750Q69 750 74 750H86L114 726Q208 641 251 514T294 250Q294 182 284 119T261 12T224 -76T186 -143T145 -194T113 -227T90 -246Q87 -249 86 -250H74Q66 -250 63 -250T58 -247T55 -238Q56 -237 66 -225Q221 -64 221 250T66 725Q56 737 55 738Q55 746 60 749Z"></path><path id="MJX-1-TEX-N-2264" d="M674 636Q682 636 688 630T694 615T687 601Q686 600 417 472L151 346L399 228Q687 92 691 87Q694 81 694 76Q694 58 676 56H670L382 192Q92 329 90 331Q83 336 83 348Q84 359 96 365Q104 369 382 500T665 634Q669 636 674 636ZM84 -118Q84 -108 99 -98H678Q694 -104 694 -118Q694 -130 679 -138H98Q84 -131 84 -118Z"></path><path id="MJX-1-TEX-N-2E" d="M78 60Q78 84 95 102T138 120Q162 120 180 104T199 61Q199 36 182 18T139 0T96 17T78 60Z"></path><path id="MJX-1-TEX-N-4C" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q48 680 182 680Q324 680 348 683H360V637H333Q273 637 258 635T233 622L232 342V129Q232 57 237 52Q243 47 313 47Q384 47 410 53Q470 70 498 110T536 221Q536 226 537 238T540 261T542 272T562 273H582V268Q580 265 568 137T554 5V0H25V46H58Q100 47 109 49T128 61V622Z"></path><path id="MJX-1-TEX-N-45" d="M128 619Q121 626 117 628T101 631T58 634H25V680H597V676Q599 670 611 560T625 444V440H585V444Q584 447 582 465Q578 500 570 526T553 571T528 601T498 619T457 629T411 633T353 634Q266 634 251 633T233 622Q233 622 233 621Q232 619 232 497V376H286Q359 378 377 385Q413 401 416 469Q416 471 416 473V493H456V213H416V233Q415 268 408 288T383 317T349 328T297 330Q290 330 286 330H232V196V114Q232 57 237 52Q243 47 289 47H340H391Q428 47 452 50T505 62T552 92T584 146Q594 172 599 200T607 247T612 270V273H652V270Q651 267 632 137T610 3V0H25V46H58Q100 47 109 49T128 61V619Z"></path><path id="MJX-1-TEX-N-55" d="M128 622Q121 629 117 631T101 634T58 637H25V683H36Q57 680 180 680Q315 680 324 683H335V637H302Q262 636 251 634T233 622L232 418V291Q232 189 240 145T280 67Q325 24 389 24Q454 24 506 64T571 183Q575 206 575 410V598Q569 608 565 613T541 627T489 637H472V683H481Q496 680 598 680T715 683H724V637H707Q634 633 622 598L621 399Q620 194 617 180Q617 179 615 171Q595 83 531 31T389 -22Q304 -22 226 33T130 192Q129 201 128 412V622Z"></path><path id="MJX-1-TEX-N-22C5" d="M78 250Q78 274 95 292T138 310Q162 310 180 294T199 251Q199 226 182 208T139 190T96 207T78 250Z"></path><path id="MJX-1-TEX-N-65" d="M28 218Q28 273 48 318T98 391T163 433T229 448Q282 448 320 430T378 380T406 316T415 245Q415 238 408 231H126V216Q126 68 226 36Q246 30 270 30Q312 30 342 62Q359 79 369 104L379 128Q382 131 395 131H398Q415 131 415 121Q415 117 412 108Q393 53 349 21T250 -11Q155 -11 92 58T28 218ZM333 275Q322 403 238 411H236Q228 411 220 410T195 402T166 381T143 340T127 274V267H333V275Z"></path><path id="MJX-1-TEX-N-78" d="M201 0Q189 3 102 3Q26 3 17 0H11V46H25Q48 47 67 52T96 61T121 78T139 96T160 122T180 150L226 210L168 288Q159 301 149 315T133 336T122 351T113 363T107 370T100 376T94 379T88 381T80 383Q74 383 44 385H16V431H23Q59 429 126 429Q219 429 229 431H237V385Q201 381 201 369Q201 367 211 353T239 315T268 274L272 270L297 304Q329 345 329 358Q329 364 327 369T322 376T317 380T310 384L307 385H302V431H309Q324 428 408 428Q487 428 493 431H499V385H492Q443 385 411 368Q394 360 377 341T312 257L296 236L358 151Q424 61 429 57T446 50Q464 46 499 46H516V0H510H502Q494 1 482 1T457 2T432 2T414 3Q403 3 377 3T327 1L304 0H295V46H298Q309 46 320 51T331 63Q331 65 291 120L250 175Q249 174 219 133T185 88Q181 83 181 74Q181 63 188 55T206 46Q208 46 208 23V0H201Z"></path><path id="MJX-1-TEX-N-70" d="M36 -148H50Q89 -148 97 -134V-126Q97 -119 97 -107T97 -77T98 -38T98 6T98 55T98 106Q98 140 98 177T98 243T98 296T97 335T97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 61 434T98 436Q115 437 135 438T165 441T176 442H179V416L180 390L188 397Q247 441 326 441Q407 441 464 377T522 216Q522 115 457 52T310 -11Q242 -11 190 33L182 40V-45V-101Q182 -128 184 -134T195 -145Q216 -148 244 -148H260V-194H252L228 -193Q205 -192 178 -192T140 -191Q37 -191 28 -194H20V-148H36ZM424 218Q424 292 390 347T305 402Q234 402 182 337V98Q222 26 294 26Q345 26 384 80T424 218Z"></path><path id="MJX-1-TEX-N-2061" d=""></path><path id="MJX-1-TEX-S4-28" d="M758 -1237T758 -1240T752 -1249H736Q718 -1249 717 -1248Q711 -1245 672 -1199Q237 -706 237 251T672 1700Q697 1730 716 1749Q718 1750 735 1750H752Q758 1744 758 1741Q758 1737 740 1713T689 1644T619 1537T540 1380T463 1176Q348 802 348 251Q348 -242 441 -599T744 -1218Q758 -1237 758 -1240Z"></path><path id="MJX-1-TEX-LO-2211" d="M60 948Q63 950 665 950H1267L1325 815Q1384 677 1388 669H1348L1341 683Q1320 724 1285 761Q1235 809 1174 838T1033 881T882 898T699 902H574H543H251L259 891Q722 258 724 252Q725 250 724 246Q721 243 460 -56L196 -356Q196 -357 407 -357Q459 -357 548 -357T676 -358Q812 -358 896 -353T1063 -332T1204 -283T1307 -196Q1328 -170 1348 -124H1388Q1388 -125 1381 -145T1356 -210T1325 -294L1267 -449L666 -450Q64 -450 61 -448Q55 -446 55 -439Q55 -437 57 -433L590 177Q590 178 557 222T452 366T322 544L56 909L55 924Q55 945 60 948Z"></path><path id="MJX-1-TEX-N-6E" d="M41 46H55Q94 46 102 60V68Q102 77 102 91T102 122T103 161T103 203Q103 234 103 269T102 328V351Q99 370 88 376T43 385H25V408Q25 431 27 431L37 432Q47 433 65 434T102 436Q119 437 138 438T167 441T178 442H181V402Q181 364 182 364T187 369T199 384T218 402T247 421T285 437Q305 442 336 442Q450 438 463 329Q464 322 464 190V104Q464 66 466 59T477 49Q498 46 526 46H542V0H534L510 1Q487 2 460 2T422 3Q319 3 310 0H302V46H318Q379 46 379 62Q380 64 380 200Q379 335 378 343Q372 371 358 385T334 402T308 404Q263 404 229 370Q202 343 195 315T187 232V168V108Q187 78 188 68T191 55T200 49Q221 46 249 46H265V0H257L234 1Q210 2 183 2T145 3Q42 3 33 0H25V46H41Z"></path><path id="MJX-1-TEX-N-4E" d="M42 46Q74 48 94 56T118 69T128 86V634H124Q114 637 52 637H25V683H232L235 680Q237 679 322 554T493 303L578 178V598Q572 608 568 613T544 627T492 637H475V683H483Q498 680 600 680Q706 680 715 683H724V637H707Q634 633 622 598L621 302V6L614 0H600Q585 0 582 3T481 150T282 443T171 605V345L172 86Q183 50 257 46H274V0H265Q250 3 150 3Q48 3 33 0H25V46H42Z"></path><path id="MJX-1-TEX-N-77" d="M90 368Q84 378 76 380T40 385H18V431H24L43 430Q62 430 84 429T116 428Q206 428 221 431H229V385H215Q177 383 177 368Q177 367 221 239L265 113L339 328L333 345Q323 374 316 379Q308 384 278 385H258V431H264Q270 428 348 428Q439 428 454 431H461V385H452Q404 385 404 369Q404 366 418 324T449 234T481 143L496 100L537 219Q579 341 579 347Q579 363 564 373T530 385H522V431H529Q541 428 624 428Q692 428 698 431H703V385H697Q696 385 691 385T682 384Q635 377 619 334L559 161Q546 124 528 71Q508 12 503 1T487 -11H479Q460 -11 456 -4Q455 -3 407 133L361 267Q359 263 266 -4Q261 -11 243 -11H238Q225 -11 220 -3L90 368Z"></path><path id="MJX-1-TEX-N-6C" d="M42 46H56Q95 46 103 60V68Q103 77 103 91T103 124T104 167T104 217T104 272T104 329Q104 366 104 407T104 482T104 542T103 586T103 603Q100 622 89 628T44 637H26V660Q26 683 28 683L38 684Q48 685 67 686T104 688Q121 689 141 690T171 693T182 694H185V379Q185 62 186 60Q190 52 198 49Q219 46 247 46H263V0H255L232 1Q209 2 183 2T145 3T107 3T57 1L34 0H26V46H42Z"></path><path id="MJX-1-TEX-N-6F" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJX-1-TEX-N-67" d="M329 409Q373 453 429 453Q459 453 472 434T485 396Q485 382 476 371T449 360Q416 360 412 390Q410 404 415 411Q415 412 416 414V415Q388 412 363 393Q355 388 355 386Q355 385 359 381T368 369T379 351T388 325T392 292Q392 230 343 187T222 143Q172 143 123 171Q112 153 112 133Q112 98 138 81Q147 75 155 75T227 73Q311 72 335 67Q396 58 431 26Q470 -13 470 -72Q470 -139 392 -175Q332 -206 250 -206Q167 -206 107 -175Q29 -140 29 -75Q29 -39 50 -15T92 18L103 24Q67 55 67 108Q67 155 96 193Q52 237 52 292Q52 355 102 398T223 442Q274 442 318 416L329 409ZM299 343Q294 371 273 387T221 404Q192 404 171 388T145 343Q142 326 142 292Q142 248 149 227T179 192Q196 182 222 182Q244 182 260 189T283 207T294 227T299 242Q302 258 302 292T299 343ZM403 -75Q403 -50 389 -34T348 -11T299 -2T245 0H218Q151 0 138 -6Q118 -15 107 -34T95 -74Q95 -84 101 -97T122 -127T170 -155T250 -167Q319 -167 361 -139T403 -75Z"></path><path id="MJX-1-TEX-S4-29" d="M33 1741Q33 1750 51 1750H60H65Q73 1750 81 1743T119 1700Q554 1207 554 251Q554 -707 119 -1199Q76 -1250 66 -1250Q65 -1250 62 -1250T56 -1249Q55 -1249 53 -1249T49 -1250Q33 -1250 33 -1239Q33 -1236 50 -1214T98 -1150T163 -1052T238 -910T311 -727Q443 -335 443 251Q443 402 436 532T405 831T339 1142T224 1438T50 1716Q33 1737 33 1741Z"></path></defs><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtable"><g data-mml-node="mtr" transform="translate(0,2299.5)"><g data-mml-node="mtd"></g><g data-mml-node="mtd"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="42" xlink:href="#MJX-1-TEX-N-42"></use><use data-c="50" xlink:href="#MJX-1-TEX-N-50" transform="translate(708,0)"></use></g></g><g data-mml-node="mo" transform="translate(1666.8,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mrow" transform="translate(2722.6,0)"><g data-mml-node="mo" transform="translate(0 -0.5)"><use data-c="7B" xlink:href="#MJX-1-TEX-S3-7B"></use></g><g data-mml-node="mtable" transform="translate(750,0)"><g data-mml-node="mtr" transform="translate(0,771.7)"><g data-mml-node="mtd"><g data-mml-node="mn"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use></g></g><g data-mml-node="mtd" transform="translate(3981.4,0)"><g data-mml-node="mstyle"><g data-mml-node="mspace"></g></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1000,0)"><g data-mml-node="mi"><use data-c="69" xlink:href="#MJX-1-TEX-N-69"></use><use data-c="66" xlink:href="#MJX-1-TEX-N-66" transform="translate(278,0)"></use></g></g><g data-mml-node="mtext" transform="translate(1650,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"></use></g><g data-mml-node="mi" transform="translate(1900,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"></use></g><g data-mml-node="mo" transform="translate(2610.8,0)"><use data-c="3E" xlink:href="#MJX-1-TEX-N-3E"></use></g><g data-mml-node="mi" transform="translate(3666.6,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"></use></g></g></g><g data-mml-node="mtr" transform="translate(0,-771.7)"><g data-mml-node="mtd"><g data-mml-node="msup"><g data-mml-node="mi"><use data-c="1D452" xlink:href="#MJX-1-TEX-I-1D452"></use></g><g data-mml-node="TeXAtom" transform="translate(499,363) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mo"><use data-c="28" xlink:href="#MJX-1-TEX-N-28"></use></g><g data-mml-node="mn" transform="translate(389,0)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use></g><g data-mml-node="mo" transform="translate(889,0)"><use data-c="2212" xlink:href="#MJX-1-TEX-N-2212"></use></g><g data-mml-node="mi" transform="translate(1667,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"></use></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(2118,0)"><g data-mml-node="mo"><use data-c="2F" xlink:href="#MJX-1-TEX-N-2F"></use></g></g><g data-mml-node="mi" transform="translate(2618,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"></use></g><g data-mml-node="mo" transform="translate(3051,0)"><use data-c="29" xlink:href="#MJX-1-TEX-N-29"></use></g></g></g></g><g data-mml-node="mtd" transform="translate(3981.4,0)"><g data-mml-node="mstyle"><g data-mml-node="mspace"></g></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1000,0)"><g data-mml-node="mi"><use data-c="69" xlink:href="#MJX-1-TEX-N-69"></use><use data-c="66" xlink:href="#MJX-1-TEX-N-66" transform="translate(278,0)"></use></g></g><g data-mml-node="mtext" transform="translate(1650,0)"><use data-c="A0" xlink:href="#MJX-1-TEX-N-A0"></use></g><g data-mml-node="mi" transform="translate(1900,0)"><use data-c="1D450" xlink:href="#MJX-1-TEX-I-1D450"></use></g><g data-mml-node="mo" transform="translate(2610.8,0)"><use data-c="2264" xlink:href="#MJX-1-TEX-N-2264"></use></g><g data-mml-node="mi" transform="translate(3666.6,0)"><use data-c="1D45F" xlink:href="#MJX-1-TEX-I-1D45F"></use></g></g></g></g><g data-mml-node="mo" transform="translate(8849,0) translate(0 250)"></g></g><g data-mml-node="mo" transform="translate(11571.6,0)"><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E"></use></g></g></g><g data-mml-node="mtr" transform="translate(0,227.8)"><g data-mml-node="mtd"></g></g><g data-mml-node="mtr" transform="translate(0,-2071.7)"><g data-mml-node="mtd"></g><g data-mml-node="mtd"><g data-mml-node="TeXAtom" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="42" xlink:href="#MJX-1-TEX-N-42"></use><use data-c="4C" xlink:href="#MJX-1-TEX-N-4C" transform="translate(708,0)"></use><use data-c="45" xlink:href="#MJX-1-TEX-N-45" transform="translate(1333,0)"></use><use data-c="55" xlink:href="#MJX-1-TEX-N-55" transform="translate(2014,0)"></use></g><g data-mml-node="mo" transform="translate(3041.8,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mi" transform="translate(4097.6,0)"><use data-c="42" xlink:href="#MJX-1-TEX-N-42"></use><use data-c="50" xlink:href="#MJX-1-TEX-N-50" transform="translate(708,0)"></use></g><g data-mml-node="mo" transform="translate(5708.8,0)"><use data-c="22C5" xlink:href="#MJX-1-TEX-N-22C5"></use></g><g data-mml-node="mi" transform="translate(6209,0)"><use data-c="65" xlink:href="#MJX-1-TEX-N-65"></use><use data-c="78" xlink:href="#MJX-1-TEX-N-78" transform="translate(444,0)"></use><use data-c="70" xlink:href="#MJX-1-TEX-N-70" transform="translate(972,0)"></use></g><g data-mml-node="mo" transform="translate(7737,0)"><use data-c="2061" xlink:href="#MJX-1-TEX-N-2061"></use></g><g data-mml-node="mrow" transform="translate(7903.7,0)"><g data-mml-node="mo" transform="translate(0 -0.5)"><use data-c="28" xlink:href="#MJX-1-TEX-S4-28"></use></g><g data-mml-node="munderover" transform="translate(792,0)"><g data-mml-node="mo"><use data-c="2211" xlink:href="#MJX-1-TEX-LO-2211"></use></g><g data-mml-node="TeXAtom" transform="translate(73.6,-1087.9) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="6E" xlink:href="#MJX-1-TEX-N-6E"></use></g><g data-mml-node="mo" transform="translate(556,0)"><use data-c="3D" xlink:href="#MJX-1-TEX-N-3D"></use></g><g data-mml-node="mn" transform="translate(1334,0)"><use data-c="31" xlink:href="#MJX-1-TEX-N-31"></use></g></g><g data-mml-node="TeXAtom" transform="translate(456.8,1150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="4E" xlink:href="#MJX-1-TEX-N-4E"></use></g></g></g><g data-mml-node="msub" transform="translate(2402.7,0)"><g data-mml-node="mi"><use data-c="77" xlink:href="#MJX-1-TEX-N-77"></use></g><g data-mml-node="TeXAtom" transform="translate(755,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="6E" xlink:href="#MJX-1-TEX-N-6E"></use></g></g></g><g data-mml-node="mi" transform="translate(3767.5,0)"><use data-c="6C" xlink:href="#MJX-1-TEX-N-6C"></use><use data-c="6F" xlink:href="#MJX-1-TEX-N-6F" transform="translate(278,0)"></use><use data-c="67" xlink:href="#MJX-1-TEX-N-67" transform="translate(778,0)"></use></g><g data-mml-node="mo" transform="translate(5045.5,0)"><use data-c="2061" xlink:href="#MJX-1-TEX-N-2061"></use></g><g data-mml-node="msub" transform="translate(5212.2,0)"><g data-mml-node="mi"><use data-c="70" xlink:href="#MJX-1-TEX-N-70"></use></g><g data-mml-node="TeXAtom" transform="translate(589,-150) scale(0.707)" data-mjx-texclass="ORD"><g data-mml-node="mi"><use data-c="6E" xlink:href="#MJX-1-TEX-N-6E"></use></g></g></g><g data-mml-node="mo" transform="translate(6244.3,0) translate(0 -0.5)"><use data-c="29" xlink:href="#MJX-1-TEX-S4-29"></use></g></g><g data-mml-node="mo" transform="translate(14940,0)"><use data-c="2E" xlink:href="#MJX-1-TEX-N-2E"></use></g></g></g></g></g></g></g></svg></mjx-container>

<table>
<thead>
<tr>
<th>符号</th>
<th>解释</th>
</tr>
</thead>
<tbody><tr>
<td>c</td>
<td>candidate 机器译文的文本长度</td>
</tr>
<tr>
<td>r</td>
<td>reference 标准译文的文本长度</td>
</tr>
<tr>
<td>BP</td>
<td>brevity penalty 惩罚项</td>
</tr>
<tr>
<td>N</td>
<td>n-gram的数值，一般可以取1，2，3，4</td>
</tr>
<tr>
<td>$w_n$</td>
<td>各个n-gram的权重</td>
</tr>
<tr>
<td>$p_n$</td>
<td>modified precision score</td>
</tr>
</tbody></table>
<h5 id="（3）代码实现"><a href="#（3）代码实现" class="headerlink" title="（3）代码实现"></a>（3）代码实现</h5><p>为了简单起见，这里使用nltk提供的计算方式来进行计算，有兴趣的小伙伴可以阅读对应的源码以获得更深入的了解：</p>
<pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> nltk<span class="token punctuation">.</span>translate<span class="token punctuation">.</span>bleu_score <span class="token keyword">import</span> sentence_bleu

<span class="token keyword">def</span> <span class="token function">cal_bleu</span><span class="token punctuation">(</span>reference<span class="token punctuation">,</span> candidate<span class="token punctuation">,</span> weights<span class="token punctuation">)</span><span class="token punctuation">:</span>
       <span class="token triple-quoted-string string">"""
    :param candidate: 机器译文
    :param reference: 参考译文
    :param weights: n-gram的权重
    :return: bleu score
    """</span>
	score <span class="token operator">=</span> sentence_bleu<span class="token punctuation">(</span>reference<span class="token punctuation">,</span> candidate<span class="token punctuation">,</span> weights<span class="token operator">=</span>weights<span class="token punctuation">)</span>
	<span class="token keyword">return</span> score

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token comment"># 参考译文</span>
    reference <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'It'</span><span class="token punctuation">,</span> <span class="token string">'is'</span><span class="token punctuation">,</span> <span class="token string">'sunny'</span><span class="token punctuation">,</span> <span class="token string">'today'</span><span class="token punctuation">,</span> <span class="token string">'so'</span><span class="token punctuation">,</span> <span class="token string">'many'</span><span class="token punctuation">,</span> <span class="token string">'people'</span><span class="token punctuation">,</span> <span class="token string">'have'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'picnic'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token comment"># 机器译文</span>
    candidate <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'It'</span><span class="token punctuation">,</span> <span class="token string">'is'</span><span class="token punctuation">,</span> <span class="token string">'sunny'</span><span class="token punctuation">,</span> <span class="token string">'today'</span><span class="token punctuation">,</span> <span class="token string">'so'</span><span class="token punctuation">,</span> <span class="token string">'many'</span><span class="token punctuation">,</span> <span class="token string">'people'</span><span class="token punctuation">,</span> <span class="token string">'have'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span>
    <span class="token comment"># 各个n-gram的权重</span>
    weights<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token number">0.25</span><span class="token punctuation">,</span> <span class="token number">0.25</span><span class="token punctuation">)</span>
    <span class="token comment"># 计算bleu score</span>
    score <span class="token operator">=</span> cal_bleu<span class="token punctuation">(</span>reference<span class="token punctuation">,</span> candidate<span class="token punctuation">,</span> weights<span class="token punctuation">)</span>
	
    <span class="token keyword">print</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="2-METEOR指标"><a href="#2-METEOR指标" class="headerlink" title="2. METEOR指标"></a>2. METEOR指标</h4><h5 id="（1）介绍-1"><a href="#（1）介绍-1" class="headerlink" title="（1）介绍"></a>（1）介绍</h5><p>在自然语言处理（NLP）中，<strong>METEOR（Metric for Evaluation of Translation with Explicit ORdering）</strong>是一种被广泛使用的用于评估机器翻译质量的指标，可以计算生成文本和参考文本之间的相似程度。由Banerjee和Lavie于2005年提出，METEOR旨在克服BLEU等传统翻译评估指标的一些局限性。以下是METEOR的几个关键特点和优势：</p>
<ol>
<li><strong>词形匹配（Word Form Matching）</strong>：METEOR不仅仅依赖于词的精确匹配，还考虑了词形变化。例如，它会将“run”和“running”视为相关词，这有助于更准确地评估翻译的语言多样性和自然性。</li>
<li><strong>同义词匹配（Synonym Matching）</strong>：通过利用同义词词典（如WordNet），METEOR能够识别并匹配同义词，从而提高评估的包容性。例如，将“big”和“large”视为匹配词。</li>
<li><strong>词序权重（Order Penalty）</strong>：METEOR对词序进行惩罚，确保翻译的词序接近参考翻译。这使得它比BLEU更能捕捉到翻译的语言流畅性。</li>
<li><strong>基于片段的评估（Chunk-Based Evaluation）</strong>：METEOR基于有意义的片段（chunks）进行评估，而不是单独的词。这有助于更好地评估句子结构和连贯性。</li>
</ol>
<h5 id="（2）计算过程-1"><a href="#（2）计算过程-1" class="headerlink" title="（2）计算过程"></a>（2）计算过程</h5><table>
<thead>
<tr>
<th>符号</th>
<th>机器翻译中常见取值</th>
</tr>
</thead>
<tbody><tr>
<td>$\alpha$</td>
<td>3</td>
</tr>
<tr>
<td>$\theta$</td>
<td>0.5</td>
</tr>
<tr>
<td>$\gamma$</td>
<td>3</td>
</tr>
</tbody></table>
<ul>
<li>首先计算 unigram 情况下的准确率P和召回率R，得到调和均值F值：</li>
</ul>
<p>$$<br>P&#x3D;\frac{\text{unigrams_matched}}{\text{unigrams_MT_output}}  \tag{2}<br>$$</p>
<p>$$<br>R&#x3D;\frac{\text{unigrams_matched}}{\text{unigrams_Reference}}  \tag{3}<br>$$</p>
<p>$$<br>F&#x3D;\frac{(\alpha^2+1)P}{R+\alpha P}  \tag{4}<br>$$</p>
<ul>
<li>然后再计算惩罚因子</li>
</ul>
<p>$$<br>Penalty&#x3D;\gamma(\frac{chunks}{unigrams_matched})^\theta  \tag{5}<br>$$</p>
<ul>
<li>最后计算出METEOR值</li>
</ul>
<p>$$<br>Meteor&#x3D;(1-Penalty)\cdot F  \tag{6}<br>$$</p>
<h5 id="（3）代码实现-1"><a href="#（3）代码实现-1" class="headerlink" title="（3）代码实现"></a>（3）代码实现</h5><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> nltk<span class="token punctuation">.</span>translate<span class="token punctuation">.</span>meteor_score <span class="token keyword">import</span> meteor_score

<span class="token keyword">def</span> <span class="token function">cal_meteor</span><span class="token punctuation">(</span>reference<span class="token punctuation">,</span> candidate<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    :param candidate: 机器译文
    :param reference: 参考译文
    :return: meteor score
    """</span>
	score <span class="token operator">=</span> meteor_score<span class="token punctuation">(</span>reference<span class="token punctuation">,</span> candidate<span class="token punctuation">)</span>
	<span class="token keyword">return</span> score

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    <span class="token comment"># 参考译文</span>
    reference <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'It'</span><span class="token punctuation">,</span> <span class="token string">'is'</span><span class="token punctuation">,</span> <span class="token string">'sunny'</span><span class="token punctuation">,</span> <span class="token string">'today'</span><span class="token punctuation">,</span> <span class="token string">'so'</span><span class="token punctuation">,</span> <span class="token string">'many'</span><span class="token punctuation">,</span> <span class="token string">'people'</span><span class="token punctuation">,</span> <span class="token string">'have'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'picnic'</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    <span class="token comment"># 机器译文</span>
    candidate <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'It'</span><span class="token punctuation">,</span> <span class="token string">'is'</span><span class="token punctuation">,</span> <span class="token string">'sunny'</span><span class="token punctuation">,</span> <span class="token string">'today'</span><span class="token punctuation">,</span> <span class="token string">'so'</span><span class="token punctuation">,</span> <span class="token string">'many'</span><span class="token punctuation">,</span> <span class="token string">'people'</span><span class="token punctuation">,</span> <span class="token string">'have'</span><span class="token punctuation">,</span> <span class="token string">'a'</span><span class="token punctuation">]</span>

    <span class="token comment"># 计算meteor score</span>
    score <span class="token operator">=</span> cal_meteor<span class="token punctuation">(</span>reference<span class="token punctuation">,</span> candidate<span class="token punctuation">)</span>
	
    <span class="token keyword">print</span><span class="token punctuation">(</span>score<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>



<h4 id="3-ROUGE"><a href="#3-ROUGE" class="headerlink" title="3. ROUGE"></a>3. ROUGE</h4><h5 id="（1）介绍-2"><a href="#（1）介绍-2" class="headerlink" title="（1）介绍"></a>（1）介绍</h5><p>ROUGE（Recall-Oriented Understudy for Gisting Evaluation）算法由 Chin-Yew Lin 在 2004 年的论文<a target="_blank" rel="noopener" href="https://www.aclweb.org/anthology/W04-1013.pdf">《ROUGE: A Package for Automatic Evaluation of Summaries》</a>中提出。与 BLEU类似，通过统计生成的摘要与参考摘要集合之间重叠的基本单元的数目来评估摘要的质量，该方法已成为自动文摘系统评价的主流方法。在前面我们介绍过BLEU分数，但是BLEU关注的是<strong>生成序列中的单个词或短语是否在参考序列中是否出现</strong>，这可能会带来一个问题：生成的序列也许是通顺的，但是其实和原文相关度不大（形象来说就是胡乱翻译），那么ROUGE就是这个问题的一种解决方案：ROUGR算法能够衡量参考序列中的单个词或短语是否在生成序列中出现，即相比BLEU关注生成序列的准确性而言更加关注<strong>生成序列的召回率。</strong></p>
<blockquote>
<p>以下内容基于文本摘要生成任务进行介绍。</p>
</blockquote>
<h5 id="（2）计算过程-2"><a href="#（2）计算过程-2" class="headerlink" title="（2）计算过程"></a>（2）计算过程</h5><p>这里我们介绍两种常见的ROUGE指标，分别为<strong>ROUGE-N</strong>与<strong>ROUGE-L</strong>，如下所示：</p>
<ul>
<li>ROUGE-N （将BLEU的精确率改为<strong>召回率</strong>） </li>
<li>ROUGE-L （将BLEU的n-gram改为<strong>公共子序列（LCS）</strong>）</li>
</ul>
<h6 id="a-ROUGE-N"><a href="#a-ROUGE-N" class="headerlink" title="a. ROUGE-N"></a>a. ROUGE-N</h6><p>计算公式为：<br>$$<br>\text{ROUGE-N}&#x3D;\frac{\sum_{S\in{\text{Ref Summaries}}}\sum_{\text{n-gram}\in S}Count_{match}(\text{n-gram})}{\sum_{S\in{\text{Ref Summaries}}}\sum_{\text{n-gram}\in S}Count(\text{n-gram})}  \tag{7}<br>$$</p>
<p>分子就是生成摘要与参考摘要相匹配的$n-gram$个数，分母就是参考摘要中所有的$n-gram$个数。</p>
<p>符号说明：</p>
<ul>
<li>$Ref\ Summaries$ 表示参考摘要集合</li>
<li>$Count_{match}(n-gram)$ 表示生成的摘要和参考摘要中同时出现的 $n-gram$的个数</li>
<li>$Count(n-gram)$则表示参考摘要中出现的$n-gram$个数。</li>
</ul>
<h6 id="b-ROUGE-L"><a href="#b-ROUGE-L" class="headerlink" title="b. ROUGE-L"></a>b. ROUGE-L</h6><p>$$<br>\begin{aligned}<br>&amp;R_{lcs} &#x3D;\frac{LCS(X,Y)}m \<br>&amp;P_{lcs} &#x3D;\frac{LCS(X,Y)}n \<br>&amp;F_{lcs} &#x3D;\frac{(1+b^2)R_{lcs}P_{lcs}}{R_{lcs}+b^2P_{lcs}}<br>\end{aligned}  \tag{8}<br>$$</p>
<p>$LCS(X,Y)$是$X$,$Y$的最长公共子序列的长度，$m$和$n$分别是参考摘要和生成摘要的词汇数量，则我们可以知道$R_{lcs}$,$P_{lcs}$ 分别表示召回率和准确率。最后的 $F_{lcs}$即是所说的 ROUGE-L分数。当b很大时，说明ROUGE_L分数几乎是只考虑$R_{lcs}$。</p>
<h5 id="（3）代码实现-2"><a href="#（3）代码实现-2" class="headerlink" title="（3）代码实现"></a>（3）代码实现</h5><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">from</span> rouge <span class="token keyword">import</span> Rouge
 
<span class="token comment"># 示例文本</span>
hypothesis <span class="token operator">=</span> <span class="token string">"the cat was found under the bed"</span>
reference <span class="token operator">=</span> <span class="token string">"the cat was under the bed"</span>
 
<span class="token comment"># 创建 Rouge 对象</span>
rouge <span class="token operator">=</span> Rouge<span class="token punctuation">(</span><span class="token punctuation">)</span>
 
<span class="token comment"># 计算分数</span>
scores <span class="token operator">=</span> rouge<span class="token punctuation">.</span>get_scores<span class="token punctuation">(</span>hypothesis<span class="token punctuation">,</span> reference<span class="token punctuation">)</span>
 
<span class="token comment"># 这里给出ROUGE_L的结果，也可以尝试其他结果比如（ROUGE_1, ROUGE_2...）</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ROUGE-L precision:"</span><span class="token punctuation">,</span> scores<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"rouge-l"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"p"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ROUGE-L recall:"</span><span class="token punctuation">,</span> scores<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"rouge-l"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"r"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"ROUGE-L F1 score:"</span><span class="token punctuation">,</span> scores<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"rouge-l"</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string">"f"</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token comment"># print("ROUGE-1 precision:", scores[0]["rouge-1"]["p"])</span>
<span class="token comment"># print("ROUGE-1 recall:", scores[0]["rouge-1"]["r"])</span>
<span class="token comment"># print("ROUGE-1 F1 score:", scores[0]["rouge-1"]["f"])</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="4-Perplexity"><a href="#4-Perplexity" class="headerlink" title="4. Perplexity"></a>4. Perplexity</h4><h5 id="（1）介绍-3"><a href="#（1）介绍-3" class="headerlink" title="（1）介绍"></a>（1）介绍</h5><p>Perplexity是一个在大模型评测中十分常见的评测指标，也经常用来衡量语言模型的好快，本文主要介绍这个指标在文本生成领域的应用。<strong>对于某个特定的序列，模型生成这个序列的概率越大，则其困惑度越小。</strong></p>
<h5 id="（2）计算过程-3"><a href="#（2）计算过程-3" class="headerlink" title="（2）计算过程"></a>（2）计算过程</h5><p><img src="/../assets/images/3/ppl.gif" alt="ppl"></p>
<p>首先，对于一个给定的序列$S&#x3D;W_{1},W_{2},…,W_{k}$，由于现在大部分的大语言模型是基于Decoder-only架构的，生成一个序列的时候，每个时间步的token的生成概率不是完全独立的，而是会受到前面一些token的影响，则要生成整个序列S的概率为联合概率<br>$$<br>P(S)&#x3D;P(W_{1},W_{2},…,W_{k})&#x3D;p(W_{1})P(W_{2}|W_{1})…P(W_{k}|W_{1},W_{2},…,W_{k-1})  \tag{9}<br>$$<br>但是这个概率有一个问题：$p(W_{1})，P(W_{2}|W_{1})，…，P(W_{k}|W_{1},W_{2},…,W_{k-1})$这些概率都是$&lt; 1$的，那么当句子的长度越长，那么整个$P(S)$的值必然越小，所以为了解决这个问题，可以对上面的计算公式加上<strong>几何平均</strong>，即<br>$$<br>\sqrt[K]{\prod_{i&#x3D;1}^KP(W_i|W_{1:i-1})}<br>$$<br>同时上面介绍过，生成这个序列的概率越大，则其困惑度越小，那么可以取上面这个几何平均的值的倒数作为最终的指标，最终计算公式为：<br>$$<br>\text{Perplexity}&#x3D;\frac1{\sqrt[K]{\prod_{i&#x3D;1}^KP(W_i|W_{1:i-1})}}  \tag{10}<br>$$</p>
<p>与交叉熵的关系：<br>$$<br>\begin{aligned}<br>\mathrm{Perplexity}&amp; &#x3D;\frac1{\sqrt[K]{\prod_{i&#x3D;1}^KP(W_i|W_{1:i-1})}} \<br>&amp; \overset{\text{同时取指数与对数}}{&#x3D;} \exp\left(\log\left(\frac1{\sqrt[K]{\prod_{i&#x3D;1}^KP(W_i|W_{1:i-1})}}\right)\right) \<br>&amp; \overset{\text{将幂次放到右上角}}{&#x3D;} \exp\left(\log\left(\left(\prod_{i&#x3D;1}^KP(W_i|W_{1:i-1})\right)^{-\frac1K}\right)\right) \<br>&amp; \overset{\text{提出对数式的幂次}}{&#x3D;} \exp\Bigg(-\frac1K\sum_{i&#x3D;1}^K\log(P(W_i|W_{1:i-1}))\Bigg) \<br>&amp; \overset{\text{用对数的计算公式}}{&#x3D;} \exp\left(\frac1K\sum_{i&#x3D;1}^K\log\frac1{P(W_i|W_{1:i-1})}\right)<br>\end{aligned}  \tag{11}<br>$$</p>
<blockquote>
<p>log计算公式：<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E5%AF%B9%E6%95%B0%E5%85%AC%E5%BC%8F/5557846">对数公式_百度百科 (baidu.com)</a></p>
</blockquote>
<h5 id="（3）代码实现-3"><a href="#（3）代码实现-3" class="headerlink" title="（3）代码实现"></a>（3）代码实现</h5><pre class="line-numbers language-python" data-language="python"><code class="language-python"><span class="token keyword">import</span> torch
<span class="token keyword">from</span> torch <span class="token keyword">import</span> Tensor
<span class="token keyword">import</span> torch<span class="token punctuation">.</span>nn<span class="token punctuation">.</span>functional <span class="token keyword">as</span> F


<span class="token keyword">def</span> <span class="token function">cal_perplexity</span><span class="token punctuation">(</span>outputs<span class="token punctuation">:</span> Tensor<span class="token punctuation">,</span> targets<span class="token punctuation">:</span> Tensor<span class="token punctuation">,</span> config<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">"""
    :param outputs: 模型输出
    :param targets: 参考输出
    :return: 困惑度
    """</span>
    <span class="token keyword">return</span> <span class="token builtin">float</span><span class="token punctuation">(</span>torch<span class="token punctuation">.</span>exp<span class="token punctuation">(</span>F<span class="token punctuation">.</span>cross_entropy<span class="token punctuation">(</span>outputs<span class="token punctuation">,</span> targets<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">"__main__"</span><span class="token punctuation">:</span>
    num_classes <span class="token operator">=</span> <span class="token number">5</span>
    batch_size  <span class="token operator">=</span> <span class="token number">1</span>
    torch<span class="token punctuation">.</span>manual_seed<span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span>
    output <span class="token operator">=</span> torch<span class="token punctuation">.</span>rand<span class="token punctuation">(</span>batch_size<span class="token punctuation">,</span> num_classes<span class="token punctuation">)</span>  <span class="token comment"># 模型输出</span>
    target <span class="token operator">=</span> torch<span class="token punctuation">.</span>randint<span class="token punctuation">(</span>num_classes<span class="token punctuation">,</span> <span class="token punctuation">(</span>batch_size<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 参考输出</span>

    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"PPL值为: "</span><span class="token punctuation">,</span> cal_perplexity<span class="token punctuation">(</span>output<span class="token punctuation">,</span> target<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token triple-quoted-string string">"""
    PPL值为:  4.331761360168457
    """</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="5-CIDEr"><a href="#5-CIDEr" class="headerlink" title="5. CIDEr"></a>5. CIDEr</h4><p>论文地址：<a href="https://link.zhihu.com/?target=https://arxiv.org/pdf/1411.5726.pdf">https://arxiv.org/pdf/1411.5726.pdf</a></p>
<h5 id="（1）介绍-4"><a href="#（1）介绍-4" class="headerlink" title="（1）介绍"></a>（1）介绍</h5><p><strong>CIDEr（Consensus-based Image Description Evaluation）</strong>是Vedantm 在 2015 年计算机视觉与模式识别大会上提出来的针对图像摘要问题的评价标准。首先，该指标是基于<strong>共识（Consensus）</strong>的评价标准，基本原理是通过计算待测评语句与其他人工描述句之间的相似性来评价相似性。研究者证明 CIDEr 在与人工共识的匹配度上要好于其它评价指标。其次，CIDEr基于句子层面上的，它将每个句子看做一个文档，每个参考句与候选句之间通过计算TF-IDF向量的余弦距离来度量其相似性。候选句的CIDEr分数是与所有句子计算出的分数的平均。</p>
<h5 id="（2）计算过程-4"><a href="#（2）计算过程-4" class="headerlink" title="（2）计算过程"></a>（2）计算过程</h5><p>符号说明：</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>$m$</td>
<td>代表候选句有m句</td>
</tr>
<tr>
<td>$n$</td>
<td>一般取4。n &#x3D; 1, 2, 3, 4对应n-gram的n，如1-gram，…</td>
</tr>
<tr>
<td>$w_n$</td>
<td>不同n-gram的权重，一般可以取1&#x2F;n</td>
</tr>
<tr>
<td>$\mathrm{g^n(c_i)}$</td>
<td>表示句子$c_i$的n-gram的TF-IDF weight 向量</td>
</tr>
<tr>
<td>$\mathrm{g^n(s_ij)}$</td>
<td>表示句子$s_ij$的n-gram的TF-IDF weight 向量</td>
</tr>
<tr>
<td>$\mathrm{C}&#x3D;{\mathrm{c}_1,\mathrm{c}_2,…,\mathrm{c}_\mathrm{N}}$</td>
<td>候选句集合（Candidates），$c_i$就是一个句子</td>
</tr>
<tr>
<td>$\mathrm{S_i}&#x3D;{\mathrm{s_{i1}},\mathrm{s_{i2}},…,\mathrm{s_{im}}}$</td>
<td>参照集(References)，i表示第i个图像，m代表第几个参考句。</td>
</tr>
</tbody></table>
<h6 id="a-计算n-gram的-CIDE-n-值"><a href="#a-计算n-gram的-CIDE-n-值" class="headerlink" title="a. 计算n-gram的$CIDE_n$值"></a>a. 计算n-gram的$CIDE_n$值</h6><p>$$<br>\mathrm{CIDEr}<em>n(c_i,S_i)&#x3D;\frac1m\sum_j\frac{\boldsymbol{g^n}(c_i)\cdot\boldsymbol{g^n}(s</em>{ij})}{|\boldsymbol{g^n}(c_i)||\boldsymbol{g^n}(s_{ij})|}  \tag{12}<br>$$</p>
<h6 id="b-计算所有n-gram的平均值"><a href="#b-计算所有n-gram的平均值" class="headerlink" title="b. 计算所有n-gram的平均值"></a>b. 计算所有n-gram的平均值</h6><p>$$<br>\mathrm{CIDEr}(c_i,S_i)&#x3D;\sum_{n&#x3D;1}^Nw_n\mathrm{CIDEr}_n(c_i,S_i)  \tag{13}<br>$$</p>
<h5 id="（3）代码实现-4"><a href="#（3）代码实现-4" class="headerlink" title="（3）代码实现"></a>（3）代码实现</h5><p>有兴趣的读者可以访问<a target="_blank" rel="noopener" href="https://github.com/tylin/coco-caption">tylin&#x2F;coco-caption</a>来获取相关的代码实现。</p>
<h3 id="三-总结"><a href="#三-总结" class="headerlink" title="三. 总结"></a>三. 总结</h3><p>本文主要讲述了<strong>文本生成任务性能评估</strong>的多个常见指标，包括<strong>BLEU、METEOR、ROUGE、Perplexity和CIDEr</strong>，这些指标为评估文本生成系统提供了全面的视角。每个指标都有其各自的<strong>侧重点和适用场景</strong>，共同构成了一个多维度的评估体系。在实际应用中，选择合适的评估指标需要根据具体任务的需求和特点来决定。此外，随着自然语言处理技术的不断进步，新的评估方法和指标也在不断涌现，为文本生成任务的性能评估提供了更多可能性。</p>
<p>通过本文的介绍，我们希望读者能够对文本生成任务的性能评估有一个基本的认识，并能够在自己的研究或开发工作中，有效地应用这些评估指标。</p>
<h3 id="四-参考文献"><a href="#四-参考文献" class="headerlink" title="四. 参考文献"></a>四. 参考文献</h3><ol>
<li>Kishore Papineni, Salim Roukos, Todd Ward, and Wei-Jing Zhu. 2002. <a target="_blank" rel="noopener" href="https://aclanthology.org/P02-1040">Bleu: a Method for Automatic Evaluation of Machine Translation</a>. In <em>Proceedings of the 40th Annual Meeting of the Association for Computational Linguistics</em>, pages 311–318, Philadelphia, Pennsylvania, USA. Association for Computational Linguistics.</li>
<li>Chin-Yew Lin. 2004. <a target="_blank" rel="noopener" href="https://aclanthology.org/W04-1013">ROUGE: A Package for Automatic Evaluation of Summaries</a>. In <em>Text Summarization Branches Out</em>, pages 74–81, Barcelona, Spain. Association for Computational Linguistics.</li>
<li>Vedantam R, Lawrence Zitnick C, Parikh D. Cider: Consensus-based image description evaluation[C]&#x2F;&#x2F;Proceedings of the IEEE conference on computer vision and pattern recognition. 2015: 4566-4575.</li>
<li>Perplexity of fixed-length models<a target="_blank" rel="noopener" href="https://huggingface.co/docs/transformers/perplexity"> explained in huggingface</a></li>
<li><a target="_blank" rel="noopener" href="https://stanford-cs324.github.io/winter2022/lectures/capabilities/#language-modeling">Capabilities | CS324 (stanford-cs324.github.io)</a></li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Perplexity">Perplexity - Wikipedia</a></li>
<li><a target="_blank" rel="noopener" href="https://paddlepedia.readthedocs.io/en/latest/tutorials/deep_learning/metrics/rouge.html">ROUGE — PaddleEdu documentation (paddlepedia.readthedocs.io)</a></li>
<li><a target="_blank" rel="noopener" href="https://paddlepedia.readthedocs.io/en/latest/tutorials/deep_learning/metrics/perplexity.html">Perplexity — PaddleEdu documentation (paddlepedia.readthedocs.io)</a></li>
<li><a target="_blank" rel="noopener" href="https://xffxff.github.io/posts/perplexity">Perplexity (xffxff.github.io)</a></li>
</ol>

  </div>

  
    
  <div class="sea-prev-next-wrapper">
    
    
      <div class="next">
        <a class="link" href="/2024/08/09/%E6%96%87%E6%9C%AC%E7%94%9F%E6%88%90%E5%B8%B8%E8%A7%81%E4%BB%BB%E5%8A%A1/">
          文本生成常见任务
        </a>
        <span>→</span>
      </div>
    
  </div>

  
</article>


  
    <link rel="stylesheet" href="https://unpkg.com/@waline/client@3.0.0-alpha.10/dist/waline.css">

<link rel="stylesheet" href="/css/plugins/waline.css">


<section id="sea-comments" class="sea-page-card-wrapper">
  <div id="sea-waline"></div>
</section>

<script type="module">
  import { init } from 'https://unpkg.com/@waline/client@3.0.0-alpha.10/dist/waline.js';

  const walineServerURL = 'alannikosgithubio-alannikos-projects.vercel.app';
  const walineOptions = null;

  init({
    el: '#sea-waline',
    serverURL: walineServerURL,
    ...walineOptions,
  });
</script>
  

  


  </main>
  <footer id="sea-footer-container">
  <div class="sea-footer-row">
    <div class="sea-footer-menu-link">
      
        <a
          class="sea-footer-link"
          
            target="_blank"
          
          href="https://github.com/Alannikos/"
        >
          Github
        </a>
        <span class="sea-footer-link__dot">·</span>
      
    </div>
    <span class="split-line">|</span>
    <span id="busuanzi_container_site_uv">
      UV: <span id="busuanzi_value_site_uv"></span>
    </span>
  </div>
  
  
  <div class="sea-footer-row">
    <div class="sea-footer-copyright">
      <span>©</span>
      
        2024
      
      <span>·</span>
      Alannikos
    </div>
    <span class="split-line">|</span>
    <div class="sea-footer-theme-by">
      Theme by <a class="theme" href="https://github.com/hai-zou/hexo-theme-sea" target="_blank">Sea</a>
    </div>
  </div>
</footer>
  <div class="sea-menu-mobile-wrap">
  <div class="sea-menu-mobile-inner">
    
      <a
        class="sea-menu-link"
        
        href="/"
      >
        首页
      </a>
    
      <a
        class="sea-menu-link"
        
        href="/categories/"
      >
        分类
      </a>
    
      <a
        class="sea-menu-link"
        
        href="/tags/"
      >
        标签
      </a>
    
      <a
        class="sea-menu-link"
        
        href="/archives/"
      >
        归档
      </a>
    
      <a
        class="sea-menu-link"
        
        href="/friends/"
      >
        友链
      </a>
    
      <a
        class="sea-menu-link"
        
        href="/about/"
      >
        关于
      </a>
    
  </div>
</div>
<div id="sea-mobile-nav-dimmer"></div>
  <div class="sea-float-tools-wrapper">
  
  <a class="sea-float-tools-btn" id="sea-back-to-top" href="#">
    <i class="sea-font">arrow_up</i>
  </a>

  
  
      <a class="sea-float-tools-btn" id="sea-search-icon">
        <i class="sea-font">search</i>
      </a>
      <div id="sea-search-input"></div>
    

  
  <div class="sea-float-tools-btn" id="sea-theme-mode">
    <i class="sea-font">theme</i>

    <ul class="sea-theme-select-box">
      <li class="sea-theme-select-item" id="sea-theme-auto">跟随系统</li>
      <li class="sea-theme-select-item" id="sea-theme-light">浅色模式</li>
      <li class="sea-theme-select-item" id="sea-theme-dark">深色模式</li>
    </ul>
  </div>
</div>

  
<script src="/js/theme.js"></script>


<script src="/js/main.js"></script>



<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- hexo injector body_end start -->
      <script type="module">
        import "https://unpkg.com/@docsearch/js@3.5.2/dist/umd/index.js";
        docsearch({
          container: '#sea-search-input',
          appId: '4O125BAM0J',
          apiKey: '15087bf8b6191918fb8d12d4ba4e23b5',
          indexName: 'alannikosio',
        });
      </script>
    <!-- hexo injector body_end end --></body>
</html>